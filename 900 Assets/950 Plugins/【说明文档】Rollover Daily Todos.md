---
obsidianUIMode: preview
type: readme
---

# Rollover Daily Todos 每日待办事项迁移

此Obsidian插件可将之前每日笔记（可能是昨天或一周前）中未完成的待办事项自动迁移至今日笔记。触发方式包括：
- 通过内置`每日笔记`或`周期笔记`插件创建新笔记时自动执行
- 通过命令面板手动运行

![插件演示动画](https://raw.githubusercontent.com/lumoe/obsidian-rollover-daily-todos/HEAD/demo.gif)

## 使用说明

### 1. 新建每日笔记
使用`每日笔记`或`周期笔记`插件创建新笔记时，前一日未完成的待办事项将自动迁移至今日笔记。

**注意：** 自动迁移可能与某些插件（特别是Templater）冲突。若使用Templater创建每日笔记，建议在插件设置中关闭自动迁移功能，改为手动触发。

### 2. 手动迁移命令
通过命令面板（macOS按CMD+P）输入`roll`可找到以下命令：
- **立即迁移待办事项**：无论当前处于何处，都会将前一日待办事项迁移至今日笔记
- **撤销上次迁移**（限时2分钟内可用）

**注意事项：**
- 这两个命令可能破坏内容，常规撤销操作（如macOS的CMD+Z）无效
- 若对未来的每日笔记执行此命令，待办事项只会迁移至今日笔记（若今日无笔记则无效果）

## 必备条件
- 需安装以下任一插件：
  1. 内置`每日笔记`插件
  2. `周期笔记`插件且启用**每日笔记**功能
- 在插件中设置笔记文件夹，且满足：
  1. 包含至少2篇笔记
  2. 所有笔记均采用每日笔记命名格式（如`YYYY-MM-DD`）

## 设置项

### 1. 禁用自动迁移
启用后需手动触发待办事项迁移

### 2. 模板标题
若在每日笔记设置中使用了模板文件，可指定未完成事项的迁移目标标题。未完成事项会从原笔记全文提取，并统一插入今日笔记的指定标题下。

留空或选择`无`时，事项将添加至笔记末尾（无模板的新笔记则为开头）。

### 3. 删除前日待办事项
默认仅复制未完成事项（如昨日未勾选"遛狗"，则两篇笔记中均会保留该事项）。启用此选项后，迁移时会删除原笔记中的未完成事项。

### 4. 过滤空待办事项
默认迁移所有含复选框的内容（无论是否有文字）。启用后将忽略空待办事项，若同时启用**设置3**则会同步删除原笔记中的空事项。

### 5. 迁移子级内容
默认仅迁移待办事项本身。启用后可同步迁移嵌套内容（包括已完成项）。

### 6. 完成状态标记
默认将含'x'/'X'/'-'的复选框识别为已完成任务。可自定义标记字符（如添加`?+>`后，`[?]`/`[+]`/`[>]`也会被视为完成状态），兼容[Obsidian Tasks](https://publish.obsidian.md/tasks/Introduction)等插件的自定义状态。

支持Unicode字符（包括复杂emoji和字形组合），确保特殊标记正常识别。

## 已知问题

1. **格式问题导致迁移失败**
   - 正则表达式检测标准：`/\s*[-*+] \[[^xX-]\].*/g`
   - 最小有效格式：`行首或制表符`-`[ ]待办文字`
   - 使用空格代替制表符可能导致行为不一致

2. **文件状态读取延迟**
   快速触发迁移时可能读取到旧文件状态。若遇此情况：
   - 先执行`撤销上次迁移`
   - 等待2秒后重试

3. **插件冲突**
   与Templater等笔记创建类插件可能冲突，导致事项丢失。解决方案：关闭自动迁移，改为手动触发。

## 安装方法
通过Obsidian的`第三方插件`市场安装